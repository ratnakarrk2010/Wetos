@model IEnumerable<WetosDB.SP_BranchAdminList_Result>
@{
    ViewBag.Title = "Branch Admin List";
}

@System.Web.Optimization.Styles.Render("~/Content/DataTable")
@System.Web.Optimization.Scripts.Render("~/bundles/DataTable")
<link href="~/Content/css/asign_branch_admin.css" rel="stylesheet" />
<link href="~/Content/allcss/allcss.css" rel="stylesheet" />
<div class="page-content-wrapper" id="page_content">
    <div class="page-content">
        <section class="content">
            <div class="row">
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-header">Branch Admin List</div>
                        <div class="box-body">
                            <div class="table-responsive">
                                <table id="BranchAdmin" class="table table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <td>
                                                Employee Name
                                            </td>
                                            <td>
                                                Company Name
                                            </td>
                                            <td>
                                                Branch Name
                                            </td>
                                            <td>Action</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in Model)
                                        {
                                            <tr>
                                                <td>
                                                    @item.Empname
                                                </td>
                                                <td>
                                                    @item.CompanyName
                                                </td>

                                                <td>
                                                    @item.BranchName
                                                </td>
                                                <td>
                                                    <span data-toggle="tooltip" title="Edit">
                                                        @*<button type="button" class="fa fa-pencil-square-o">*@
                                                            @Html.ActionLink(" ", "EditBranchAdmin", new { id = item.employeeid , Branch = item.BranchName}, new { @class = "fa fa-pencil-square-o" })
                                                        @*</button>*@
                                                    </span> |
                                                    @*@Html.ActionLink("Details", "Details", new { id = item.CompanyId }) |*@
                                                    <span data-toggle="tooltip" title="Delete">
                                                        <button type="button" class="fa fa-trash" onclick="deleteBranchAdmin('@item.userroleid')"></button>
                                                        @*@Html.ActionLink(" ", "", new { id = item.EmployeeCode }, new { @class = "fa fa-trash" })*@
                                                    </span>

                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                    <tfoot></tfoot>
                                </table>
                            </div>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </section>
    </div>
</div>

<script type="text/jscript">
    $(document).ready(function () {
        $('.back').click(function () {
            parent.history.back();
            return false;
        });
    });

    function goBack() {
        window.history.back();
    }

    $(function () {
        $("#BranchAdmin").DataTable();
    });
    function deleteBranchAdmin(userRoleId) {
        debugger;
           showloading();
            $.ajax({
                url: '@Url.Content("~/RoleNavMenu/DeleteBranchAdmin")',
                type: "POST",
                data: { UserRoleId: userRoleId },
                success: function (data) {
                    $("#BranchAdmin").DataTable();
                    hideloading();
                    if (data === "success") {
                        alert("Record Deleted Successfully..!");
                        location.reload();
                    }
                    else
                        alert("Not Deleted");
                },
                error: function (data) {
                    hideloading();
                }
            });
            hideloading();
        }
</script>