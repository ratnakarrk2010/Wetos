@model IEnumerable<WetosDB.SP_GetEncashmentList_Result>
@{
    ViewBag.Title = "Encashment";
}
@System.Web.Optimization.Styles.Render("~/Content/DataTable")
@System.Web.Optimization.Scripts.Render("~/bundles/DataTable")
<link href="~/Content/css/enhancement_index.css" rel="stylesheet" />
<link href="~/Content/allcss/allcss.css" rel="stylesheet" />

<div class="page-content-wrapper" id="page_content">
    <div class="page-content">
        <section class="content-header">
            <div class="row page-breadcrumb breadcrumb ed_breadcrumb ed_breadcrumb_row">
                <div class="col-sm-6 ed_breadcrumb_div">
                    <ul>
                        <li class="li_margin1">
                            <img src="~/Content/images/icon/home_1.png" class="home_width_height" />
                            <a href="@Url.Action("Index", "Home")">Home</a><i class="fa fa-angle-right"></i>

                        </li>
                        <li class="li_margin">
                            <a href="#">Applications</a>
                            <i class="fa fa-angle-right"></i>
                        </li>

                        <li class="li_margin">
                          <a href="#">Encashment</a>
                        </li>
                        </ul>
                </div>
                <div class="col-sm-6">
                    <ul style="float: right;">
                        <li class="">
                            <div id="dashboard-report margin_left" data-toggle="tooltip" title="Today's date">
                                <img src="~/Content/images/icon/imageedit_42.png" class="icon_width_height" />
                                <span>
                                    @DateTime.Now.ToLongDateString()
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <h1 class="margin_left_h1"> Leave Encashment 
             <small>Details</small>
             <span data-toggle="tooltip" title="Apply for Leave" onclick="showloading();" style="float: right; font-weight: 800">
                    @Html.ActionLink(" ", "EncashmentApplication", new { Myself = true }, new { @class = "fa fa-plus-circle circle1", title = "Apply Leave Encashment", style = "color:#428bca;font-size:19px" })</span>
        
            </h1>
      <br />
       @*Above lines Commented and added by Shalaka on 22nd DEC 2017 --- End*@
     
     @*Below Code commented by shalaka on 22nd DEC 2017 --- Start*@ 
       @*Added by Pushkar For back breadcrumb on 24 OCT 2016----------Start*@
      @*<div>
      <span class="btn btn-default" style="float:left;font-weight:200">@Html.ActionLink(" Apply Leave Encashment", "EncashmentApplication")</span>
      </div>
      <div style="clear: both;"></div>*@
       @*Added by Pushkar For back breadcrumb on 24 OCT 2016-----------End*@
     @*Below Code commented by shalaka on 22nd DEC 2017 --- End*@ 

    </section>
        <section class="content">
      <div class="row">
        <div class="col-xs-12">
          <div class="box">
          
            <div class="box-body">

 @using (Html.BeginForm("EncashmentIndex", "WetosApplication", FormMethod.Post, new { id = "Form" }))
 {
    <div style="color: Red; font-size: 12px">
    @Html.ValidationSummary(true)
    </div>
<table id="LeaveEncashment" class="table table-bordered table-striped">  @*Added by Shraddha For datatable on 17 DEC 2016*@
<thead>
    <tr>
      
       @* <td>
            LeaveEncashId
        </td>*@
       @* <td>
            EmployeeId
        </td>
        <td>
            FinancialYearId
        </td>*@

         <td>
            Code
        </td>
        <td>
            Name
        </td>
         <td>
            Financial Year
        </td>
        <td>
            Leave Type
        </td>
        <td>
            Status
        </td>
        <td>
            EncashValue
        </td>
       @* <td>
            RejectReason
        </td>*@
       @* <td>
            BranchId
        </td>
        <td>
            CompanyId
        </td>*@
         <td align="center">
         Action
         </td>
       
    </tr>
     </thead>

    <tbody>
@foreach (var item in Model)
{
    <tr>
       
        @*<td>
            @item.LeaveEncashId
        </td>
        <td>
            @item.EmployeeId
        </td>
        <td>
            @item.FinancialYearId
        </td>*@
        <td>
            @item.EmployeeCode
        </td>
        <td>
            @item.EmployeeName
        </td>
        <td>
            @item.FinancialName
        </td>
        <td>
            @item.LeaveCode
        </td>
        <td>
            @item.StatusName
        </td>
        <td>
            @String.Format("{0:F}", item.EncashValue)
        </td>
       @* <td>
            @item.RejectReason
        </td>*@
       @* <td>
            @item.BranchId
        </td>
        <td>
            @item.CompanyId
        </td>*@
        
         <td align="center">
      @*@if (item.StatusId == 1)
         {
         @Html.ActionLink("Edit", "EncashmentApplicationEdit", new { id = item.LeaveEncashId }) <span> | </span>
        @Html.ActionLink("Delete", "EncashmentIndex", new { id = item.LeaveEncashId }, new { @onclick = "Delete();" })       
         }*@
         
          <span data-toggle="tooltip" title="Edit">
             @Html.ActionLink(" ", "EncashmentApplicationEdit", new { LeaveEncashId = item.LeaveEncashId }, new { @class = "fa fa-pencil-square-o" })</span> |
            @*@Html.ActionLink("Details", "Details", new { id = item.CompanyId }) |*@
            <span data-toggle="tooltip" title="Delete">
            @Html.ActionLink(" ", "EncashmentApplicationDelete", new { LeaveEncashId = item.LeaveEncashId }, new { @class = "fa fa-trash" })
            </span>
        </td>
           
    </tr>
}
</tbody>

<tfoot>
                
                </tfoot>

</table>
 }
</div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->

          <!-- /.box -->
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->
    </section>
    </div>
</div>
@*ADDED CODE BY RAJAS ON 29 MARCH 2017 FOR ALERT POPUP START*@
<div id="EncashDiv" style="width: 30% !important; height: 30% !important; z-index: 1000000;
    background-color: White; top: 20%; left: 40%" class="modal fade"> @*REMOVED SHOW CLASS TAKEN MODAL FADE CLASS INSTEAD OF MODAL SHOW FADE CLASS BY SHRADDHA ON 09 FEB 2018 BECAUSE IT WAS CREATING CLICKING ISSUE*@
    <div class="modal-body">
        <div>
            Do you want to delete this application?</div>
    </div>
    <div class="modal-footer">
        <center>
            <button type="button" data-dismiss="modal" class="col-md-2  btn btn-primary" id="btnYes">
                Yes</button>
            <button type="button" data-dismiss="modal" class="col-md-2 btn">
                Cancel</button></center>
    </div>
</div>
@*ADDED CODE BY RAJAS ON 29 MARCH 2017 FOR ALERT POPUP END*@ @*Added by Shraddha For back breadcrumb on 17 DEC 2016-------start*@
<script type="text/jscript">
    $(document).ready(function () {
        $('.back').click(function () {
            parent.history.back();
            return false;
        });
    });

    function goBack() {
        window.history.back();
    }

</script>
@*Added by Shraddha For back breadcrumb on 17 DEC 2016---------end*@ @*Added by Shraddha For datatable on 17 DEC 2016-------start*@
<script>
    $(function () {

        $("#LeaveEncashment").DataTable();

    });
</script>
@*Added by Shraddha For datatable on 17 DEC 2016-------End*@
<script type="text/javascript">
 function Delete() {
        //        alert("In function");
        //        var $form = $(this).closest('form');
        //        $('#EncashDiv').modal({ backdrop: 'static', keyboard: false })
        //                .one('click', '#btnYes', function () {
        //                    alert("click");

        $("#Form").submit();
        // });
</script>
