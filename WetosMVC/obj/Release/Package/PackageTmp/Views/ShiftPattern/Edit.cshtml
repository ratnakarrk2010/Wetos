@model WetosDB.ShiftPatternRule
@{
    ViewBag.Title = "Shift Pattern Edit";
}
<link href="~/Content/allcss/allcss.css" rel="stylesheet" />
<link href="~/Content/css/shiftpattern_edit.css" rel="stylesheet" />

<div class="page-content-wrapper" id="page_content">
    <div class="page-content">
        <section class="content-header">
            <div class="row page-breadcrumb breadcrumb ed_breadcrumb">
                <div class="col-sm-6">
                    <ul>
                        <li class="li_margin1" >
                            <img src="~/Content/images/icon/home_1.png" class="home_width_height" />
                            <a href="@Url.Action("Index", "Home")">Home</a><i class="fa fa-angle-right"></i>

                        </li>
                          <li class="li_margin">
                         <a href="#">Masters</a>
                            <i class="fa fa-angle-right"></i>
                        </li>
                        <li class="li_margin">
                            <a href="#">ShiftPattern </a>
                        </li>
                        </ul>
                </div>
                <div class="col-sm-6">
                    <ul style="float: right;">
                        <li class="">
                            <div id="dashboard-report margin_left" data-toggle="tooltip" title="Today's date">
                                <img src="~/Content/images/icon/imageedit_42.png" class="icon_width_height" />
                                <span>
                                    @DateTime.Now.ToLongDateString()
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
             <h1>
        Shift Pattern
        <small>Edit</small>
      </h1>
      <div style="clear: both;"></div>

       @*Added by Pushkar For back breadcrumb on 24 OCT 2016-----------End*@
          
 </section>
        <section class="content">
<div class="row">
<div class="col-xs-12 col-md-12 col-lg-12">         
<div class="box">

<div class="box-body">
 
                @using (Html.BeginForm("Edit", "ShiftPattern", FormMethod.Post, new { id = "Create", name = "Create" }))
                {
                <fieldset>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Shift Pattern Name:</label>
                        <div class="col-md-7">
                        @*fav icon added by atul & Mithilesh on 26 june 2017----start*@
                         <div class="input-group date">
        <div class="input-group-addon">
             <i  class="fa fa-list-ul"></i>
  	</div> 

                             @Html.TextBoxFor(model => model.ShiftPatternName, new { @class = "form-control pull-right" })
            <div style="color: Red; font-size: 12px">
            @Html.ValidationMessageFor(model => model.ShiftPatternName)
            </div>
                        </div>
                        </div>
                       
                    </div>
     <br/>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Shift Pattern Short Name:</label>
                        <div class="col-md-7">
                        @*fav icon added by atul & Mithilesh on 26 june 2017----start*@
                         <div class="input-group date">
        <div class="input-group-addon">
             <i  class="fa fa-list-ul"></i>
  	</div> 
            @Html.TextBoxFor(model => model.ShiftPatternShortName, new { @class = "form-control pull-right" })
            <div style="color: Red; font-size: 12px">
            @Html.ValidationMessageFor(model => model.ShiftPatternShortName)
            </div>
                            </div>
                        </div>
                    </div>
     <br/>
                    <div class="form-group">
                        <label class="col-md-3 control-label">Shift Pattern Description:</label>
                        <div class="col-md-7">
                        @*fav icon added by atul & Mithilesh on 26 june 2017----start*@
                         <div class="input-group date">
        <div class="input-group-addon">
             <i  class="fa fa-file-text-o"></i>
  	</div> 
                             @Html.TextBoxFor(model => model.ShiftPatternDescription, new { @class = "form-control pull-right" })
            <div style="color: Red; font-size: 12px">
            @Html.ValidationMessageFor(model => model.ShiftPatternDescription)
                            </div>
                        </div>
                    </div>
                    </div>
                     <br/>
                     <div class="form-group">
                        <label class="col-md-3 control-label">Start Day</label>
                        <div class="col-md-7">
                        @*fav icon added by atul & Mithilesh on 26 june 2017----start*@
                         <div class="input-group date">
        <div class="input-group-addon">
             <i  class="fa fa-calendar"></i>
  	</div> 
                            @Html.DropDownList("ShiftScheduleStartDay", new List<SelectListItem>() { new SelectListItem { Text = "MONDAY", Value = "MONDAY" },
                           new SelectListItem { Text = "TUESDAY", Value = "TUESDAY" },
                           new SelectListItem { Text = "WEDNESDAY", Value = "WEDNESDAY" }, 
                           new SelectListItem { Text = "THURSDAY", Value = "THURSDAY" },
                           new SelectListItem { Text = "FRIDAY", Value = "FRIDAY" }, 
                           new SelectListItem { Text = "SATURDAY", Value = "SATURDAY" }, 
                           new SelectListItem { Text = "SUNDAY", Value = "SUNDAY" } },
                           "Select", new { @class = "form-control" })
                        </div>
                        </div>
                    </div>
                     <br/>
                    <div class="form-group">
                        <label class="col-md-3 control-label">No.of Days:</label>
                        <div class="col-md-7">
                        @*fav icon added by atul & Mithilesh on 26 june 2017----start*@
                        <div class="input-group date">
                <div class="input-group-addon">
                 <i  class="fa fa-calendar"></i>
            	</div> 
                @*@Html.TextBoxFor(model => model.NoofDays, new { @class = "form-control pull-right"})*@
                @*Above line Commented and Below  line is added by shalaka on 18th DEC 2017*@
            <input type="text" class="form-control" name="NoofDays" id="NoofDays" value= "@Model.NoofDays" onblur="CheckDays()" />
            <div style="color: Red; font-size: 12px">
            @Html.ValidationMessageFor(model => model.NoofDays)
                            </div>
                        </div>
                        </div>
                    </div>
    <br />
    <br />
                    <p>
                    <input type="button" class="btn green " id="btnDraw" name="btnDraw" value="Draw" onclick="BtnDraw(@Model.NoofDays, @Model.ShiftPatternRuleId)" />
                   </p>
                        <div id="div_shiftpatt">
                        
                    </div>
                     </fieldset>
                }
            </div>
</div>
</div>
</div>

</section>
    </div>
</div>
<script type="text/javascript">

    $('body').ajaxStart(function () {
        $(this).css({ 'cursor': 'wait' });
    }).ajaxStop(function () {
        $(this).css({ 'cursor': 'default' });
    });

    function BtnDraw(Noofdays, id) {
        alert("1");
        CheckDays();
        alert("2");
        alert(Noofdays);
        alert(id);
        alert("3");
        var NoOfDays = $("#NoofDays").val();
        alert(NoOfDays);


        $.ajax({
            url: '@Url.Content("~/ShiftPattern/DrawPatternForEdit")',
            //data: JSON.stringify({ noofdays: NoOfDays, ShiftPId: id }),
            //type: 'POST',
            //contentType: 'application/json; charset=utf-8',
            //dataType: 'json',
            type: "POST",
            dataType: "json",
            data: { noofdays: Noofdays, ShiftPId: id },
            success: function (result) {
                $("#div_shiftpatt").html(result);
            },
            error: function (result) {
                alert("Error in Draw Pattern");
            }

        });
    }

    function valid(e) {
        if ($("#txtShiftPatternName").val() == "") {
            $("#alert").html("Please enter Shift Pattern Name");
            $('#alert').addClass("alert alert-danger");
        }
        else if ($("#txtShortName").val() == "") {
            $("#alert").html("Please enter Shift Pattern Short Name");
            $('#alert').addClass("alert alert-danger");
        }
        else if ($("#NoofDays").val() == "") {
            $("#alert").html("Please enter No.Of Days");
            $('#alert').addClass("alert alert-danger");
        }
        else {
            $('#alert').html('');
            $("#alert").removeClass("alert alert-danger");
            document.forms["Create"].submit();
        }
    }

    function CheckDays() {
        if ($("#NoofDays").val() < 7) {
            alert("Please enter no. of days greater than or equal to 7 ");
            $("#NoofDays").val('');
            return false;
        }

    }

    //    $("#weekrule").change(function () {

    //        $.ajax({

    //            url: '@Url.Content("~/ShiftPattern/GetWeekRuleInfo")',
    //            data: JSON.stringify({weekruleid : $("#weekrule").val()}),
    //            type: 'POST',
    //            contentType: 'application/json; charset=utf-8',
    //            dataType: 'json',
    //            success: function (result) {
    //                $("#hid_weekrule").val(result);
    //            },
    //            error:function(result)
    //            {}

    //        });

    //    });

</script>
<script type="text/jscript">
    $(document).ready(function () {

        //Above code added by Shalaka on 28th DEC 2017 -- Start
        $('.back').click(function () {
            parent.history.back();
            return false;
        });
        //Above code added by Shalaka on 28th DEC 2017 -- End

    });
</script>
